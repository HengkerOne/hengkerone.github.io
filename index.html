<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>POC: Cross-Origin Isolation Bypass</title>
</head>
<body>

    <h1>[POC] Cross-Origin Isolation FAILURE</h1>
    <p>Memuat target: <code>https://google.com</code></p>
    
    <!-- iframe ini hanyalah demonstrasi visual -->
    <iframe id="vulnerable_iframe" src="https://google.com" style="width:100%; height:300px; border: 2px solid red;"></iframe>
    
    <hr>
    
    <h2>Status Verifikasi</h2>
    <div id="coep_result" class="result">Menguji Status Isolasi...</div>
    <div id="coop_result" class="result">Menguji COOP (Akses Opener)...</div>

    <script>
        const vulnerableUrl = "https://google.com";
        const resultCoep = document.getElementById('coep_result');
        const resultCoop = document.getElementById('coop_result');

        // Tes 1: COEP/COOP STATUS
        const isIsolated = window.crossOriginIsolated;
        
        resultCoep.innerHTML = `Status Isolasi Window Attacker: <code>window.crossOriginIsolated</code> = <strong>${isIsolated}</strong>.`;

        if (!isIsolated) {
            resultCoep.classList.add('fail');
            resultCoep.innerHTML += '<br><strong class="critical">❌ COEP/COOP GAGAL (VULNERABLE)</strong>: FALSE berarti rentan Spectre.';
        }

        // Tes 2: COOP - Akses Window Opener
        resultCoop.innerHTML = 'Membuka popup untuk menguji pemisahan browsing context group...';

        const popup = window.open(vulnerableUrl, '_blank');
            
        setTimeout(() => {
            if (popup && popup.opener !== null) {
                resultCoop.classList.add('fail');
                resultCoop.innerHTML = '<strong class="critical">❌ COOP GAGAL (VULNERABLE)</strong>: Jendela popup masih memiliki referensi <code>opener</code> yang valid.';
            } else {
                resultCoop.innerHTML = '✅ COOP Pass (Browser modern mungkin memutusnya secara default, tetapi kegagalan isIsolated adalah bukti utama).';
            }
        }, 2000); 

    </script>
    
</body>
</html>
